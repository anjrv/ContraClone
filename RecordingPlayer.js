//  RecordingPlayer class that can provide dt values to the _update_clocks routine in main
// and simultanuously set all the pressed down keys to true

// Constructor
function RecordingPlayer() {
  this.frame_count = 0;
  this.keys = [];
  this.xml = `<recording><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.65399999999954</dt></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.70300000000043</dt></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.561999999999898</dt></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.46900000000005</dt></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.595000000000255</dt></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.756999999999607</dt></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.51299999999992</dt></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.667999999999665</dt></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>17.105000000000473</dt></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.296000000000276</dt></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>17.0679999999993</dt></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.28900000000067</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.8779999999997</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.832000000000335</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.463999999999942</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.724999999999454</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.720000000000255</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.628999999999905</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.40400000000045</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>17.011999999999716</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.261999999999716</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.822000000000116</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.59100000000035</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.48700000000008</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>17.125</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.21099999999933</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.634000000000015</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>17.079000000000633</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.281999999999243</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.983000000000175</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.40400000000045</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>17.0029999999997</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.297999999999774</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.6850000000004</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>17.0029999999997</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.39100000000053</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.83100000000013</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.53399999999965</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.717999999999847</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.463999999999942</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.659999999999854</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.582000000000335</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>17.001999999999498</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.353000000000065</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.632000000000517</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.988000000000284</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.277999999999338</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>17.032000000000153</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.32300000000032</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.711999999999534</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.733000000000175</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.73999999999978</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.548999999999978</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.606000000000677</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.61499999999978</dt></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.721999999999753</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.636999999999716</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.707000000000335</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.77300000000014</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.475999999999658</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>17.056000000000495</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.2529999999997</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.761999999999716</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.595000000000255</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.71600000000035</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.548999999999978</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.67699999999968</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.649000000000342</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.725999999999658</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.734999999999673</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.57300000000032</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.645000000000437</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.79699999999957</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.511000000000422</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.698999999999614</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.663000000000466</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>17.112999999999374</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.291000000000167</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.625</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>17.00500000000011</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.2470000000003</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>17.067000000000007</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.281999999999243</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.587000000000444</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.69300000000021</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.66899999999987</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.622999999999593</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.726000000000568</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.65399999999954</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.646999999999935</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.952000000000226</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.764000000000124</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.221999999999753</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>17.052999999999884</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.39300000000003</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.60400000000027</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.64300000000003</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.713999999999942</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.997999999999593</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.28400000000056</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.661999999999352</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.77600000000075</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.61999999999989</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.930999999999585</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.32000000000062</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.646999999999935</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.964999999999236</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.395000000000437</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.625</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.672999999999774</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.689000000000306</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.577000000000226</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.73700000000008</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.89599999999973</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.724999999999454</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.73199999999997</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.749000000000706</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.60699999999997</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.229999999999563</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.666000000000167</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.63000000000011</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.93199999999979</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.416000000000167</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.66899999999987</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.689000000000306</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>17.02599999999984</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.703999999999724</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.23400000000038</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.608000000000175</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.693999999999505</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.679000000000087</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.609999999999673</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.707000000000335</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.65400000000045</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.670000000000073</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.915999999999258</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.438000000000102</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.833999999999833</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.914999999999964</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.645000000000437</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.207000000000335</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.951000000000022</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.43499999999949</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.603000000000065</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.685999999999694</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.666000000000167</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.653000000000247</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.97900000000027</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.89099999999962</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.1899999999996</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.845000000000255</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.515000000000327</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.537000000000262</dt><key>A</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.71099999999933</dt></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>17.00300000000061</dt></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.336999999999534</dt></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.66700000000037</dt></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>17.023999999999432</dt></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.228000000000065</dt></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.663000000000466</dt></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.65099999999984</dt></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.764000000000124</dt></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>17.00300000000061</dt></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.438000000000102</dt></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.77799999999843</dt></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.454999999999927</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.882000000001426</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.808999999999287</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.524999999999636</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.291000000001077</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>17.197000000000116</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.532999999999447</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.652000000000044</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.28399999999965</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.700000000000728</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.743999999998778</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.493000000000393</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.681000000000495</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.67399999999907</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>17.056000000000495</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.256999999999607</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.713999999999942</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>17.00500000000102</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.322000000000116</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>17.037999999998647</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.294000000001688</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.586999999999534</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>17.07499999999891</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.314000000000306</dt><key>D</key></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.80199999999968</dt></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.988000000001193</dt></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.24699999999939</dt></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.66899999999987</dt></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.69499999999971</dt></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.89600000000064</dt></timeframe><timeframe xmlns="http://www.w3.org/1999/xhtml"><dt>16.3179999999993</dt></timeframe></recording>
  `
  let parser = new DOMParser();
  let xml_object = parser.parseFromString(this.xml, 'text/xml');
  this.timestamps = xml_object.getElementsByTagName('timeframe');
  console.log(this.timestamps);
}

// Request that the player moves to the next frame
// Has to be seperate because the update is sometimes paused but the clocks are still 
// update-ing
RecordingPlayer.prototype.nextFrame = function () {
  this.frame_count++;
}

// Returns the dt value for the current frame
RecordingPlayer.prototype.getNextFrameDelta_ms = function() {
  // When the recording is over we turn off the recording and reset the framecount to 0
  if (this.frame_count >= this.timestamps.length) {
    this.cleanupKeys();
    this.frame_count = 0;
    g_play_recording = false;
    return NOMINAL_UPDATE_INTERVAL;
  }

  let dt = this.timestamps[this.frame_count]
    .getElementsByTagName('dt')[0]
    .innerHTML;
  dt = dt.replace(/\u200B/g, '');
  return Number.parseFloat(dt);
}

// Updates the global keys array so that the correct keys are in the pressed down state 
// for the current frame
RecordingPlayer.prototype.setKeys = function () {
  // We are manipulating the keys arrays and have to clean up after ourselves
  this.cleanupKeys();

  let keys_this_frame = this.timestamps[this.frame_count]
    .getElementsByTagName('key');

  for (let i = 0; i < keys_this_frame.length; i++) {
    let key = keys_this_frame[i].innerHTML;
    key = key.replace(/\u200B/g, '');
    keys[keyCode(key)] = true;
    this.keys.push(keyCode(key));
  }
}

// Sets all the keys we have explicitly set to true back to false 
// Prevents contamination of input between frames
RecordingPlayer.prototype.cleanupKeys = function () {
  for (let i = this.keys.length - 1; i >= 0; i--) {
    keys[this.keys[i]] = false;
    this.keys.splice(i, 1);
  }
}

const RECORDINGPLAYER = new RecordingPlayer();